---

title: Labelled carbon stock dataset

keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/02_labelled_carbon_stock_dataset.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/02_labelled_carbon_stock_dataset.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Carbon-stock">Carbon stock<a class="anchor-link" href="#Carbon-stock"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">path_soilc</span> <span class="o">=</span> <span class="s1">&#39;../data/ISRIC_report_2008_02_csv/&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path_soilc</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[&#39;WISE3_LABcodes_Description.csv&#39;,
 &#39;WISE3_HORIZON.csv&#39;,
 &#39;WISE3_coding_conventions.csv&#39;,
 &#39;WISE3__ReadMeFirst.csv&#39;,
 &#39;WISE3_LABname.csv&#39;,
 &#39;WISE3_LABname_codes.csv&#39;,
 &#39;WISE3_SITE.csv&#39;,
 &#39;WISE3_SOURCE.csv&#39;]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Calculate carbon stock.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_carbon_stock</span><span class="p">(</span><span class="n">path_csv</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
    <span class="n">horizon</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path_csv</span><span class="p">)</span>
    <span class="n">horizon</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">horizon</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>

    <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;wise3_id&#39;</span><span class="p">,</span> <span class="s1">&#39;topdep&#39;</span><span class="p">,</span> <span class="s1">&#39;botdep&#39;</span><span class="p">,</span> <span class="s1">&#39;orgc&#39;</span><span class="p">,</span> <span class="s1">&#39;bulkdens&#39;</span><span class="p">]</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">horizon</span><span class="p">[</span><span class="n">cols</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;botdep_trunc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;botdep&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">upper</span><span class="o">=</span><span class="n">depth</span><span class="p">)</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;segment_length&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;botdep_trunc&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;topdep&#39;</span><span class="p">]</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;segment_length&#39;</span><span class="p">]</span> <span class="o">/=</span> <span class="n">depth</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;wise3_id&#39;</span><span class="p">,</span> <span class="s1">&#39;segment_length&#39;</span><span class="p">,</span> <span class="s1">&#39;orgc&#39;</span><span class="p">,</span> <span class="s1">&#39;bulkdens&#39;</span><span class="p">]]</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span>
        <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">bulkdens</span><span class="o">.</span><span class="n">notnull</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">df</span><span class="o">.</span><span class="n">orgc</span><span class="o">.</span><span class="n">notnull</span><span class="p">()</span> 
         <span class="o">&amp;</span> <span class="n">df</span><span class="o">.</span><span class="n">segment_length</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="p">]</span>

    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;weighted_orgc_voldens&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">df</span><span class="p">[</span><span class="s1">&#39;segment_length&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;orgc&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;bulkdens&#39;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;wise3_id&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">weighted_orgc_voldens</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span>
        <span class="p">{</span><span class="s1">&#39;weighted_orgc_voldens&#39;</span><span class="p">:</span> <span class="s1">&#39;carbon_stock&#39;</span><span class="p">},</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">df</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">carbon_stock</span> <span class="o">=</span> <span class="n">get_carbon_stock</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">path_soilc</span><span class="si">}</span><span class="s1">/WISE3_HORIZON.csv&#39;</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Get (longitude, latitude)s of profiles.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">site</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">path_soilc</span><span class="si">}</span><span class="s1">/WISE3_SITE.csv&#39;</span><span class="p">)</span>
<span class="n">site</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">site</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">site</span><span class="o">.</span><span class="n">columns</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Index([&#39;wise3_id&#39;, &#39;iso&#39;, &#39;descr&#39;, &#39;dateyr&#39;, &#39;datemon&#39;, &#39;soldep&#39;, &#39;hornum&#39;,
       &#39;fao_90&#39;, &#39;pha_90&#39;, &#39;fao_74&#39;, &#39;pha_74&#39;, &#39;wrb2006&#39;, &#39;uscl&#39;, &#39;usyr&#39;,
       &#39;local&#39;, &#39;londd&#39;, &#39;latdd&#39;, &#39;lonlat_acc&#39;, &#39;locat&#39;, &#39;koppen&#39;, &#39;altit&#39;,
       &#39;lform&#39;, &#39;posit&#39;, &#39;slope&#39;, &#39;parmat&#39;, &#39;drain&#39;, &#39;landus&#39;, &#39;source_id&#39;,
       &#39;pitref&#39;, &#39;lab_id&#39;, &#39;country&#39;],
      dtype=&#39;object&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">site</span><span class="p">[[</span><span class="s1">&#39;wise3_id&#39;</span><span class="p">,</span> <span class="s1">&#39;londd&#39;</span><span class="p">,</span> <span class="s1">&#39;latdd&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">carbon_stock</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">carbon_stock</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s1">&#39;wise3_id&#39;</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s1">&#39;wise3_id&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">carbon_stock</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>wise3_id</th>
      <th>londd</th>
      <th>latdd</th>
      <th>carbon_stock</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>AL0007</td>
      <td>19.99556</td>
      <td>41.06944</td>
      <td>12.11205</td>
    </tr>
    <tr>
      <th>1</th>
      <td>AL0008</td>
      <td>20.64722</td>
      <td>40.21500</td>
      <td>6.79968</td>
    </tr>
    <tr>
      <th>2</th>
      <td>AL0009</td>
      <td>20.78444</td>
      <td>40.63722</td>
      <td>10.18997</td>
    </tr>
    <tr>
      <th>3</th>
      <td>AL0010</td>
      <td>19.48361</td>
      <td>40.34528</td>
      <td>15.78198</td>
    </tr>
    <tr>
      <th>4</th>
      <td>AL0011</td>
      <td>19.77028</td>
      <td>41.37778</td>
      <td>17.50674</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="MODCF-intraannualSD">MODCF intraannualSD<a class="anchor-link" href="#MODCF-intraannualSD"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>

<span class="n">da</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_rasterio</span><span class="p">(</span><span class="s1">&#39;../data/MODCF_intraannualSD.tif&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>CPU times: user 59.8 ms, sys: 24.3 ms, total: 84.1 ms
Wall time: 144 ms
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span><span class="n">carbon_stock</span><span class="o">.</span><span class="n">londd</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span><span class="n">carbon_stock</span><span class="o">.</span><span class="n">latdd</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>CPU times: user 6.92 s, sys: 980 ms, total: 7.9 s
Wall time: 9.36 s
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">carbon_stock</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;intraannualSD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">carbon_stock</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>wise3_id</th>
      <th>londd</th>
      <th>latdd</th>
      <th>carbon_stock</th>
      <th>intraannualSD</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>AL0007</td>
      <td>19.99556</td>
      <td>41.06944</td>
      <td>12.11205</td>
      <td>1268</td>
    </tr>
    <tr>
      <th>1</th>
      <td>AL0008</td>
      <td>20.64722</td>
      <td>40.21500</td>
      <td>6.79968</td>
      <td>1115</td>
    </tr>
    <tr>
      <th>2</th>
      <td>AL0009</td>
      <td>20.78444</td>
      <td>40.63722</td>
      <td>10.18997</td>
      <td>1245</td>
    </tr>
    <tr>
      <th>3</th>
      <td>AL0010</td>
      <td>19.48361</td>
      <td>40.34528</td>
      <td>15.78198</td>
      <td>1808</td>
    </tr>
    <tr>
      <th>4</th>
      <td>AL0011</td>
      <td>19.77028</td>
      <td>41.37778</td>
      <td>17.50674</td>
      <td>1457</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>3640</th>
      <td>ZW0060</td>
      <td>25.08333</td>
      <td>-18.08333</td>
      <td>12.94279</td>
      <td>2888</td>
    </tr>
    <tr>
      <th>3641</th>
      <td>ZW0062</td>
      <td>31.63333</td>
      <td>-21.00000</td>
      <td>10.39402</td>
      <td>1782</td>
    </tr>
    <tr>
      <th>3642</th>
      <td>ZW0063</td>
      <td>31.08333</td>
      <td>-17.71667</td>
      <td>11.58268</td>
      <td>2481</td>
    </tr>
    <tr>
      <th>3643</th>
      <td>ZW0065</td>
      <td>28.50000</td>
      <td>-20.50000</td>
      <td>8.96388</td>
      <td>2323</td>
    </tr>
    <tr>
      <th>3644</th>
      <td>ZW0066</td>
      <td>31.63333</td>
      <td>-21.00000</td>
      <td>22.23596</td>
      <td>1782</td>
    </tr>
  </tbody>
</table>
<p>3645 rows × 5 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="elevation_1KMmd_GMTEDmd">elevation_1KMmd_GMTEDmd<a class="anchor-link" href="#elevation_1KMmd_GMTEDmd"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">da</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_rasterio</span><span class="p">(</span><span class="s1">&#39;../data/elevation_1KMmd_GMTEDmd.tif&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">band</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>CPU times: user 7.1 s, sys: 1.33 s, total: 8.43 s
Wall time: 9.34 s
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">carbon_stock</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;elevation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Dataset-splits">Dataset splits<a class="anchor-link" href="#Dataset-splits"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">idxs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">permutation</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">carbon_stock</span><span class="p">)))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">frac_test</span> <span class="o">=</span> <span class="o">.</span><span class="mi">1</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cutoff_test</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">frac_test</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">idxs</span><span class="p">))</span>

<span class="n">idxs_test</span> <span class="o">=</span> <span class="n">idxs</span><span class="p">[:</span><span class="n">cutoff_test</span><span class="p">]</span>
<span class="n">idxs_train</span> <span class="o">=</span> <span class="n">idxs</span><span class="p">[</span><span class="n">cutoff_test</span><span class="p">:]</span>

<span class="n">df_test</span> <span class="o">=</span> <span class="n">carbon_stock</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">idxs_test</span><span class="p">]</span>
<span class="n">df_train</span> <span class="o">=</span> <span class="n">carbon_stock</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">idxs_train</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span> ls ../data
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-blue-fg">ISRIC_report_2008_02</span>        carbon_stock_test.csv
<span class="ansi-blue-fg">ISRIC_report_2008_02_csv</span>    carbon_stock_train.csv
MODCF_intraannualSD.tif     elevation_1KMmd_GMTEDmd.tif
WD-WISE.zip
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_test</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../data/carbon_stock_test.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">df_train</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;../data/carbon_stock_train.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

